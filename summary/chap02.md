## 2장

좋은 테스트의 조건

### 읽기 쉬운 코드가 유지보수도 쉽다
- 읽기 어려운 코드는 검증하기도 어렵고, 결과적으로 테스트를 조금만 작성하는 사태로 이어진다.
- 테스트 코드도 마찬가지로 가독성이 좋아야 한다.

### 구조화가 잘 되어 있다면 이해하기 쉽다
읽기 쉽고, 찾기 쉽고, 이해하기 쉽도록 한 가지 기능에 충실한 테스트의 이점
- 현재 작업과 관련된 테스트 클래스를 찾을 수 있다.
- 그 클래스에서 적절한 테스트 메서드를 고를 수 있다.
- 그 메서드에서 사용하는 객체의 생명주기를 이해할 수 있다.

### 엉뚱한 걸 검사하는 건 좋지 않다
- 유지보수 관점에서는 어떻게 구현했느냐가 아니라 의도한 대로 구현했느냐를 검사하는 게 중요하다.
  - 이름만으로 테스트가 검증하는 게 무엇인지 확신할 수 있어야 한다.

### 독립적인 테스트는 혼자서도 잘 실행된다
- 격리와 독립성이 중요한 이유는 그것이 없다면 테스트를 실행하고 관리하기가 훨씬 어렵기 때문이다.
- 시간, 임의성, 동시성, 인프라, 영속성, 기존 데이터, 네트워킹 관련 코드를 검사할 때는 특별히 더 신경 써야 한다. 이들과의 종속성은 가능하다면 피하는 게 최선이고, 아니면 작고 격리된 단위로 구분해서 이 복잡한 상황으로부터 다른 테스트를 보호해야 한다.

### 믿음직한 테스트라야 기댈 수 있다
- 테스트를 믿고 의지하려면 반복할 수 있게 만들어야 한다. 열 번 싱행하면 열 번 모두 반드시 같은 결과가 나와야 한다. 그렇지 않으면 빌드할 때마다 테스트 결과를 직접 중재해줘야 한다.

### 모든 일이 그렇듯 테스트에도 도구가 쓰인다.
- 테스트 더블
  - 스텁, 가짜 객체, Mock 객체 등으로 알고 있는 개념들을 통칭하는 용어
- 테스트 더블의 장점
  - 원래의 로직을 간소화된 코드로 대체하여 테스트 속도를 개선한다.
  - 만들어내기 어려운 특수한 상황을 시뮬레이션한다.
  - 대상 객체의 내부 상태나 동작 등 테스트가 접근할 수 없던 정버를 얻어낸다.